"Class","Method","Depth","Trace Instruction(s) ...","Java Code Representation","Code Merged","Access Control Level"
"Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl","createVirtualDevice(Landroid/os/IBinder;Ljava/lang/String;ILandroid/companion/virtual/VirtualDeviceParams;Landroid/companion/virtual/IVirtualDeviceActivityListener;)Landroid/companion/virtual/IVirtualDevice;","0","7 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
9 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 7 @8 exception:8,
invokevirtual < Application, Landroid/content/Context, enforceCallingOrSelfPermission(Ljava/lang/String;Ljava/lang/String;)V > 9,10,11 @16 exception:12,
14 = invokestatic < Application, Landroid/companion/virtual/IVirtualDeviceManager$Stub, getCallingUid()I > @19 exception:13,
15 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
17 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 15 @25 exception:16,
19 = invokestatic < Application, Lcom/android/server/companion/virtual/PermissionUtils, validateCallingPackageName(Landroid/content/Context;Ljava/lang/String;)Z > 17,3 @29 exception:18,
conditional branch(eq, to iindex=-1) 19,20,
38 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, getAssociationInfo(Ljava/lang/String;I)Landroid/companion/AssociationInfo; > 1,3,4 @35 exception:37,
conditional branch(eq, to iindex=-1) 38,20,
50 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
52 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDeviceManagerLock(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Ljava/lang/Object; > 50 @43 exception:51,
monitorenter 52,
53 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
55 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDevices(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 53 @50 exception:54,
57 = invokevirtual < Application, Landroid/util/SparseArray, contains(I)Z > 55,4 @54 exception:56,
conditional branch(ne, to iindex=-1) 57,20,
73 = invokestatic < Application, Landroid/os/UserHandle, getUserId(I)I > 14 @60 exception:72,
74 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
76 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmCameraAccessControllers(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 74 @66 exception:75,
78 = invokevirtual < Application, Landroid/util/SparseArray, get(I)Ljava/lang/Object; > 76,73 @70 exception:77,
79 = checkcast <Application,Lcom/android/server/companion/virtual/CameraAccessController>78 <Application,Lcom/android/server/companion/virtual/CameraAccessController>,
80 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl>@77,
81 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
83 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 81 @81 exception:82,
84 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$1>@85,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$1, <init>(Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl;Lcom/android/server/companion/virtual/CameraAccessController;I)V > 84,1,79,73 @87 exception:85,
86 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0>@90,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0, <init>(Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl;Lcom/android/server/companion/virtual/CameraAccessController;Landroid/companion/AssociationInfo;)V > 86,1,79,38 @92 exception:87,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, <init>(Landroid/content/Context;Landroid/companion/AssociationInfo;Landroid/os/IBinder;ILcom/android/server/companion/virtual/VirtualDeviceImpl$OnDeviceCloseListener;Lcom/android/server/companion/virtual/VirtualDeviceImpl$PendingTrampolineCallback;Landroid/companion/virtual/IVirtualDeviceActivityListener;Ljava/util/function/Consumer;Landroid/companion/virtual/VirtualDeviceParams;)V > 80,83,38,2,14,84,1,6,86,5 @105 exception:88,
conditional branch(eq, to iindex=-1) 79,20,
invokevirtual < Application, Lcom/android/server/companion/virtual/CameraAccessController, startObservingIfNeeded()V > 79 @110 exception:101,
goto (from iindex= 56 to iindex = 23),
107 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
109 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDevices(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 107 @138 exception:108,
111 = invokevirtual < Application, Landroid/companion/AssociationInfo, getId()I > 38 @142 exception:110,
invokevirtual < Application, Landroid/util/SparseArray, put(ILjava/lang/Object;)V > 109,111,80 @146 exception:112,
monitorexit 52,
return 80,","depth : 0
-----
","public IVirtualDevice createVirtualDevice(IBinder p1, String p2, int p3, VirtualDeviceParams p4, IVirtualDeviceActivityListener p5){
	int v3 = IVirtualDeviceManager$Stub.getCallingUid();
	Context v4 = this.this$0.getContext();
	boolean v5 = PermissionUtils.validateCallingPackageName(v4, p2);
	if (v5 == 0) {
		AssociationInfo v6 = p0.getAssociationInfo(p2, p3);
		if (v6 == 0) {
			Object v7 = VirtualDeviceManagerService.-$$Nest$fgetmVirtualDeviceManagerLock(this.this$0);
			SparseArray v8 = VirtualDeviceManagerService.-$$Nest$fgetmVirtualDevices(this.this$0);
			boolean v9 = v8.contains(p3);
			if (v9 != 0) {
				int v10 = UserHandle.getUserId(v3);
				SparseArray v11 = VirtualDeviceManagerService.-$$Nest$fgetmCameraAccessControllers(this.this$0);
				Object v12 = v11.get(v10);
				VirtualDeviceImpl v13 = new VirtualDeviceImpl(v14,v6,p1,v3,v15,p0,p5,v17,p4);
				Context v14 = this.this$0.getContext();
				VirtualDeviceManagerService$VirtualDeviceManagerImpl$1 v15 = new VirtualDeviceManagerService$VirtualDeviceManagerImpl$1(p0,v12,v10);
				VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0 v17 = new VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0(p0,v12,v6);
				if (v12 == 0) {
					v12.startObservingIfNeeded();
					SparseArray v21 = VirtualDeviceManagerService.-$$Nest$fgetmVirtualDevices(this.this$0);
					int v22 = v6.getId();
					v21.put(v22, v13);
					return v13;
				}
			}
		}
	}
}
","NORMAL"
"Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl","createVirtualDevice(Landroid/os/IBinder;Ljava/lang/String;ILandroid/companion/virtual/VirtualDeviceParams;Landroid/companion/virtual/IVirtualDeviceActivityListener;)Landroid/companion/virtual/IVirtualDevice;","1","7 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
9 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 7 @8 exception:8,
invokevirtual < Application, Landroid/content/Context, enforceCallingOrSelfPermission(Ljava/lang/String;Ljava/lang/String;)V > 9,10,11 @16 exception:12,
14 = invokestatic < Application, Landroid/companion/virtual/IVirtualDeviceManager$Stub, getCallingUid()I > @19 exception:13,
15 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
17 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 15 @25 exception:16,
19 = invokestatic < Application, Lcom/android/server/companion/virtual/PermissionUtils, validateCallingPackageName(Landroid/content/Context;Ljava/lang/String;)Z > 17,3 @29 exception:18,
6 = invokestatic < Application, Landroid/os/Binder, getCallingUid()I > @5 exception:5,
8 = invokestatic < Application, Landroid/os/Binder, clearCallingIdentity()J > @9 exception:7,
11 = invokevirtual < Application, Landroid/content/Context, getPackageManager()Landroid/content/pm/PackageManager; > 1 @14 exception:10,
13 = invokestatic < Application, Landroid/os/UserHandle, getUserId(I)I > 6 @18 exception:12,
15 = invokevirtual < Application, Landroid/content/pm/PackageManager, getPackageUidAsUser(Ljava/lang/String;I)I > 11,2,13 @22 exception:14,
conditional branch(eq, to iindex=-1) 15,6,
invokestatic < Application, Landroid/os/Binder, restoreCallingIdentity(J)V > 8 @66 exception:16,
return 17,
conditional branch(eq, to iindex=-1) 19,20,
38 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, getAssociationInfo(Ljava/lang/String;I)Landroid/companion/AssociationInfo; > 1,3,4 @35 exception:37,
5 = invokestatic < Application, Landroid/companion/virtual/IVirtualDeviceManager$Stub, getCallingUserHandle()Landroid/os/UserHandle; > @0 exception:4,
7 = invokevirtual < Application, Landroid/os/UserHandle, getIdentifier()I > 5 @4 exception:6,
8 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
10 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmAllAssociations(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Ljava/util/concurrent/ConcurrentHashMap; > 8 @10 exception:9,
12 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 7 @14 exception:11,
14 = invokevirtual < Application, Ljava/util/concurrent/ConcurrentHashMap, get(Ljava/lang/Object;)Ljava/lang/Object; > 10,12 @18 exception:13,
15 = checkcast <Application,Ljava/util/List>14 <Application,Ljava/util/List>,
conditional branch(eq, to iindex=-1) 15,16,
30 = invokeinterface < Application, Ljava/util/List, size()I > 15 @26 exception:29,
43 = phi  42,16,
conditional branch(ge, to iindex=-1) 43,30,
32 = invokeinterface < Application, Ljava/util/List, get(I)Ljava/lang/Object; > 15,43 @33 exception:31,
33 = checkcast <Application,Landroid/companion/AssociationInfo>32 <Application,Landroid/companion/AssociationInfo>,
35 = invokevirtual < Application, Landroid/companion/AssociationInfo, belongsToPackage(ILjava/lang/String;)Z > 33,7,2 @39 exception:34,
conditional branch(eq, to iindex=-1) 35,16,
42 = binaryop(add) 43 , 41,
goto (from iindex= 28 to iindex = -23),
43 = phi  42,16,
conditional branch(ge, to iindex=-1) 43,30,
return 16,
conditional branch(eq, to iindex=-1) 38,20,
50 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
52 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDeviceManagerLock(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Ljava/lang/Object; > 50 @43 exception:51,
2 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, mVirtualDeviceManagerLock, <Application,Ljava/lang/Object> > 1,
return 2,
monitorenter 52,
53 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
55 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDevices(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 53 @50 exception:54,
2 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, mVirtualDevices, <Application,Landroid/util/SparseArray> > 1,
return 2,
57 = invokevirtual < Application, Landroid/util/SparseArray, contains(I)Z > 55,4 @54 exception:56,
conditional branch(ne, to iindex=-1) 57,20,
73 = invokestatic < Application, Landroid/os/UserHandle, getUserId(I)I > 14 @60 exception:72,
74 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
76 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmCameraAccessControllers(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 74 @66 exception:75,
2 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, mCameraAccessControllers, <Application,Landroid/util/SparseArray> > 1,
return 2,
78 = invokevirtual < Application, Landroid/util/SparseArray, get(I)Ljava/lang/Object; > 76,73 @70 exception:77,
79 = checkcast <Application,Lcom/android/server/companion/virtual/CameraAccessController>78 <Application,Lcom/android/server/companion/virtual/CameraAccessController>,
80 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl>@77,
81 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
83 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 81 @81 exception:82,
84 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$1>@85,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$1, <init>(Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl;Lcom/android/server/companion/virtual/CameraAccessController;I)V > 84,1,79,73 @87 exception:85,
86 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0>@90,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0, <init>(Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl;Lcom/android/server/companion/virtual/CameraAccessController;Landroid/companion/AssociationInfo;)V > 86,1,79,38 @92 exception:87,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, <init>(Landroid/content/Context;Landroid/companion/AssociationInfo;Landroid/os/IBinder;ILcom/android/server/companion/virtual/VirtualDeviceImpl$OnDeviceCloseListener;Lcom/android/server/companion/virtual/VirtualDeviceImpl$PendingTrampolineCallback;Landroid/companion/virtual/IVirtualDeviceActivityListener;Ljava/util/function/Consumer;Landroid/companion/virtual/VirtualDeviceParams;)V > 80,83,38,2,14,84,1,6,86,5 @105 exception:88,
conditional branch(eq, to iindex=-1) 79,20,
invokevirtual < Application, Lcom/android/server/companion/virtual/CameraAccessController, startObservingIfNeeded()V > 79 @110 exception:101,
2 = getfield < Application, Lcom/android/server/companion/virtual/CameraAccessController, mLock, <Application,Ljava/lang/Object> > 1,
monitorenter 2,
3 = getfield < Application, Lcom/android/server/companion/virtual/CameraAccessController, mObserverCount, <Primordial,I> > 1,
conditional branch(ne, to iindex=-1) 3,4,
5 = getfield < Application, Lcom/android/server/companion/virtual/CameraAccessController, mCameraManager, <Application,Landroid/hardware/camera2/CameraManager> > 1,
6 = getfield < Application, Lcom/android/server/companion/virtual/CameraAccessController, mContext, <Application,Landroid/content/Context> > 1,
8 = invokevirtual < Application, Landroid/content/Context, getMainExecutor()Ljava/util/concurrent/Executor; > 6 @11 exception:7,
invokevirtual < Application, Landroid/hardware/camera2/CameraManager, registerAvailabilityCallback(Ljava/util/concurrent/Executor;Landroid/hardware/camera2/CameraManager$AvailabilityCallback;)V > 5,8,1 @15 exception:9,
11 = getfield < Application, Lcom/android/server/companion/virtual/CameraAccessController, mObserverCount, <Primordial,I> > 1,
13 = binaryop(add) 11 , 12,
putfield 1.< Application, Lcom/android/server/companion/virtual/CameraAccessController, mObserverCount, <Primordial,I> > = 13,
monitorexit 2,
return,
goto (from iindex= 56 to iindex = 23),
107 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
109 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDevices(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 107 @138 exception:108,
2 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, mVirtualDevices, <Application,Landroid/util/SparseArray> > 1,
return 2,
111 = invokevirtual < Application, Landroid/companion/AssociationInfo, getId()I > 38 @142 exception:110,
2 = getfield < Application, Landroid/companion/AssociationInfo, mId, <Primordial,I> > 1,
return 2,
invokevirtual < Application, Landroid/util/SparseArray, put(ILjava/lang/Object;)V > 109,111,80 @146 exception:112,
monitorexit 52,
return 80,","depth : 0
-----
depth : 1
-----
depth : 1
-----
depth : 1
-----
depth : 1
-----
depth : 1
-----
depth : 1
-----
depth : 1
-----
depth : 1
-----
","public IVirtualDevice createVirtualDevice(IBinder p1, String p2, int p3, VirtualDeviceParams p4, IVirtualDeviceActivityListener p5){
	int v3 = IVirtualDeviceManager$Stub.getCallingUid();
	Context v4 = this.this$0.getContext();
	Binder.restoreCallingIdentity(v7);
	boolean v5 = 1;
	if (v5 == 0) {
		UserHandle v13 = IVirtualDeviceManager$Stub.getCallingUserHandle();
		int v14 = v13.getIdentifier();
		ConcurrentHashMap v15 = VirtualDeviceManagerService.-$$Nest$fgetmAllAssociations(this.this$0);
		Integer v16 = Integer.valueOf(v14);
		Object v17 = v15.get(v16);
		if (v17 == 0) {
			int v18 = v17.size();
			if (0 >= v18) {
				Object v19 = v17.get(0);
				boolean v20 = v19.belongsToPackage(v14, p2);
				if (v20 == 0) {
					if ((0 + 1) >= v18) {
						AssociationInfo v12 = 0;
						if (v12 == 0) {
							Object v21 = this.mVirtualDeviceManagerLock;
							SparseArray v22 = this.mVirtualDevices;
							boolean v23 = v22.contains(p3);
							if (v23 != 0) {
								int v24 = UserHandle.getUserId(v3);
								SparseArray v25 = this.mCameraAccessControllers;
								Object v26 = v25.get(v24);
								VirtualDeviceImpl v27 = new VirtualDeviceImpl(v28,v12,p1,v3,v29,p0,p5,v31,p4);
								Context v28 = this.this$0.getContext();
								VirtualDeviceManagerService$VirtualDeviceManagerImpl$1 v29 = new VirtualDeviceManagerService$VirtualDeviceManagerImpl$1(p0,v26,v24);
								VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0 v31 = new VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0(p0,v26,v12);
								if (v26 == 0) {
									if (this.mObserverCount != 0) {
										Executor v35 = this.mContext.getMainExecutor();
										this.mCameraManager.registerAvailabilityCallback(v35, CameraAccessController);
										this.mObserverCount = (this.mObserverCount + 1);
										SparseArray v37 = this.mVirtualDevices;
										int v38 = this.mId;
										v37.put(v38, v27);
										return v27;
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
","NORMAL"
"Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl","createVirtualDevice(Landroid/os/IBinder;Ljava/lang/String;ILandroid/companion/virtual/VirtualDeviceParams;Landroid/companion/virtual/IVirtualDeviceActivityListener;)Landroid/companion/virtual/IVirtualDevice;","2","7 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
9 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 7 @8 exception:8,
invokevirtual < Application, Landroid/content/Context, enforceCallingOrSelfPermission(Ljava/lang/String;Ljava/lang/String;)V > 9,10,11 @16 exception:12,
14 = invokestatic < Application, Landroid/companion/virtual/IVirtualDeviceManager$Stub, getCallingUid()I > @19 exception:13,
15 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
17 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 15 @25 exception:16,
19 = invokestatic < Application, Lcom/android/server/companion/virtual/PermissionUtils, validateCallingPackageName(Landroid/content/Context;Ljava/lang/String;)Z > 17,3 @29 exception:18,
6 = invokestatic < Application, Landroid/os/Binder, getCallingUid()I > @5 exception:5,
8 = invokestatic < Application, Landroid/os/Binder, clearCallingIdentity()J > @9 exception:7,
11 = invokevirtual < Application, Landroid/content/Context, getPackageManager()Landroid/content/pm/PackageManager; > 1 @14 exception:10,
13 = invokestatic < Application, Landroid/os/UserHandle, getUserId(I)I > 6 @18 exception:12,
15 = invokevirtual < Application, Landroid/content/pm/PackageManager, getPackageUidAsUser(Ljava/lang/String;I)I > 11,2,13 @22 exception:14,
conditional branch(eq, to iindex=-1) 15,6,
invokestatic < Application, Landroid/os/Binder, restoreCallingIdentity(J)V > 8 @66 exception:16,
return 17,
conditional branch(eq, to iindex=-1) 19,20,
38 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, getAssociationInfo(Ljava/lang/String;I)Landroid/companion/AssociationInfo; > 1,3,4 @35 exception:37,
5 = invokestatic < Application, Landroid/companion/virtual/IVirtualDeviceManager$Stub, getCallingUserHandle()Landroid/os/UserHandle; > @0 exception:4,
7 = invokevirtual < Application, Landroid/os/UserHandle, getIdentifier()I > 5 @4 exception:6,
8 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
10 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmAllAssociations(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Ljava/util/concurrent/ConcurrentHashMap; > 8 @10 exception:9,
2 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, mAllAssociations, <Application,Ljava/util/concurrent/ConcurrentHashMap> > 1,
return 2,
12 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 7 @14 exception:11,
14 = invokevirtual < Application, Ljava/util/concurrent/ConcurrentHashMap, get(Ljava/lang/Object;)Ljava/lang/Object; > 10,12 @18 exception:13,
15 = checkcast <Application,Ljava/util/List>14 <Application,Ljava/util/List>,
conditional branch(eq, to iindex=-1) 15,16,
30 = invokeinterface < Application, Ljava/util/List, size()I > 15 @26 exception:29,
43 = phi  42,16,
conditional branch(ge, to iindex=-1) 43,30,
32 = invokeinterface < Application, Ljava/util/List, get(I)Ljava/lang/Object; > 15,43 @33 exception:31,
33 = checkcast <Application,Landroid/companion/AssociationInfo>32 <Application,Landroid/companion/AssociationInfo>,
35 = invokevirtual < Application, Landroid/companion/AssociationInfo, belongsToPackage(ILjava/lang/String;)Z > 33,7,2 @39 exception:34,
4 = getfield < Application, Landroid/companion/AssociationInfo, mUserId, <Primordial,I> > 1,
conditional branch(ne, to iindex=-1) 4,2,
5 = getfield < Application, Landroid/companion/AssociationInfo, mPackageName, <Application,Ljava/lang/String> > 1,
7 = invokestatic < Application, Ljava/util/Objects, equals(Ljava/lang/Object;Ljava/lang/Object;)Z > 5,3 @6 exception:6,
conditional branch(eq, to iindex=-1) 7,8,
goto (from iindex= 7 to iindex = 2),
11 = phi  10,8,
return 11,
conditional branch(eq, to iindex=-1) 35,16,
42 = binaryop(add) 43 , 41,
goto (from iindex= 28 to iindex = -23),
43 = phi  42,16,
conditional branch(ge, to iindex=-1) 43,30,
return 16,
conditional branch(eq, to iindex=-1) 38,20,
50 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
52 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDeviceManagerLock(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Ljava/lang/Object; > 50 @43 exception:51,
monitorenter 52,
53 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
55 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDevices(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 53 @50 exception:54,
57 = invokevirtual < Application, Landroid/util/SparseArray, contains(I)Z > 55,4 @54 exception:56,
conditional branch(ne, to iindex=-1) 57,20,
73 = invokestatic < Application, Landroid/os/UserHandle, getUserId(I)I > 14 @60 exception:72,
74 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
76 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmCameraAccessControllers(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 74 @66 exception:75,
78 = invokevirtual < Application, Landroid/util/SparseArray, get(I)Ljava/lang/Object; > 76,73 @70 exception:77,
79 = checkcast <Application,Lcom/android/server/companion/virtual/CameraAccessController>78 <Application,Lcom/android/server/companion/virtual/CameraAccessController>,
80 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl>@77,
81 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
83 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 81 @81 exception:82,
84 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$1>@85,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$1, <init>(Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl;Lcom/android/server/companion/virtual/CameraAccessController;I)V > 84,1,79,73 @87 exception:85,
86 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0>@90,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0, <init>(Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl;Lcom/android/server/companion/virtual/CameraAccessController;Landroid/companion/AssociationInfo;)V > 86,1,79,38 @92 exception:87,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, <init>(Landroid/content/Context;Landroid/companion/AssociationInfo;Landroid/os/IBinder;ILcom/android/server/companion/virtual/VirtualDeviceImpl$OnDeviceCloseListener;Lcom/android/server/companion/virtual/VirtualDeviceImpl$PendingTrampolineCallback;Landroid/companion/virtual/IVirtualDeviceActivityListener;Ljava/util/function/Consumer;Landroid/companion/virtual/VirtualDeviceParams;)V > 80,83,38,2,14,84,1,6,86,5 @105 exception:88,
conditional branch(eq, to iindex=-1) 79,20,
invokevirtual < Application, Lcom/android/server/companion/virtual/CameraAccessController, startObservingIfNeeded()V > 79 @110 exception:101,
2 = getfield < Application, Lcom/android/server/companion/virtual/CameraAccessController, mLock, <Application,Ljava/lang/Object> > 1,
monitorenter 2,
3 = getfield < Application, Lcom/android/server/companion/virtual/CameraAccessController, mObserverCount, <Primordial,I> > 1,
conditional branch(ne, to iindex=-1) 3,4,
5 = getfield < Application, Lcom/android/server/companion/virtual/CameraAccessController, mCameraManager, <Application,Landroid/hardware/camera2/CameraManager> > 1,
6 = getfield < Application, Lcom/android/server/companion/virtual/CameraAccessController, mContext, <Application,Landroid/content/Context> > 1,
8 = invokevirtual < Application, Landroid/content/Context, getMainExecutor()Ljava/util/concurrent/Executor; > 6 @11 exception:7,
invokevirtual < Application, Landroid/hardware/camera2/CameraManager, registerAvailabilityCallback(Ljava/util/concurrent/Executor;Landroid/hardware/camera2/CameraManager$AvailabilityCallback;)V > 5,8,1 @15 exception:9,
conditional branch(eq, to iindex=-1) 2,4,
9 = invokestatic < Application, Landroid/hardware/camera2/CameraManager$CameraManagerGlobal, get()Landroid/hardware/camera2/CameraManager$CameraManagerGlobal; > @2 exception:8,
10 = getfield < Application, Landroid/hardware/camera2/CameraManager, mHasOpenCloseListenerPermission, <Primordial,Z> > 1,
invokevirtual < Application, Landroid/hardware/camera2/CameraManager$CameraManagerGlobal, registerAvailabilityCallback(Landroid/hardware/camera2/CameraManager$AvailabilityCallback;Ljava/util/concurrent/Executor;Z)V > 9,3,2,10 @8 exception:11,
return,
11 = getfield < Application, Lcom/android/server/companion/virtual/CameraAccessController, mObserverCount, <Primordial,I> > 1,
13 = binaryop(add) 11 , 12,
putfield 1.< Application, Lcom/android/server/companion/virtual/CameraAccessController, mObserverCount, <Primordial,I> > = 13,
monitorexit 2,
return,
goto (from iindex= 56 to iindex = 23),
107 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
109 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDevices(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 107 @138 exception:108,
111 = invokevirtual < Application, Landroid/companion/AssociationInfo, getId()I > 38 @142 exception:110,
invokevirtual < Application, Landroid/util/SparseArray, put(ILjava/lang/Object;)V > 109,111,80 @146 exception:112,
monitorexit 52,
return 80,","depth : 0
-----
depth : 1
-----
depth : 1
-----
depth : 2
-----
depth : 2
-----
depth : 1
-----
depth : 2
-----
","public IVirtualDevice createVirtualDevice(IBinder p1, String p2, int p3, VirtualDeviceParams p4, IVirtualDeviceActivityListener p5){
	int v3 = IVirtualDeviceManager$Stub.getCallingUid();
	Context v4 = this.this$0.getContext();
	Binder.restoreCallingIdentity(v7);
	boolean v5 = 1;
	if (v5 == 0) {
		UserHandle v13 = IVirtualDeviceManager$Stub.getCallingUserHandle();
		int v14 = v13.getIdentifier();
		ConcurrentHashMap v15 = this.mAllAssociations;
		Integer v16 = Integer.valueOf(v14);
		Object v17 = v15.get(v16);
		if (v17 == 0) {
			int v18 = v17.size();
			if (0 >= v18) {
				Object v19 = v17.get(0);
				if (this.mUserId != v14) {
					boolean v21 = Objects.equals(this.mPackageName, p2);
					if (v21 == 0) {
						boolean v20 = 1;
						if (v20 == 0) {
							if ((0 + 1) >= v18) {
								AssociationInfo v12 = 0;
								if (v12 == 0) {
									Object v22 = VirtualDeviceManagerService.-$$Nest$fgetmVirtualDeviceManagerLock(this.this$0);
									SparseArray v23 = VirtualDeviceManagerService.-$$Nest$fgetmVirtualDevices(this.this$0);
									boolean v24 = v23.contains(p3);
									if (v24 != 0) {
										int v25 = UserHandle.getUserId(v3);
										SparseArray v26 = VirtualDeviceManagerService.-$$Nest$fgetmCameraAccessControllers(this.this$0);
										Object v27 = v26.get(v25);
										VirtualDeviceImpl v28 = new VirtualDeviceImpl(v29,v12,p1,v3,v30,p0,p5,v32,p4);
										Context v29 = this.this$0.getContext();
										VirtualDeviceManagerService$VirtualDeviceManagerImpl$1 v30 = new VirtualDeviceManagerService$VirtualDeviceManagerImpl$1(p0,v27,v25);
										VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0 v32 = new VirtualDeviceManagerService$VirtualDeviceManagerImpl$$ExternalSyntheticLambda0(p0,v27,v12);
										if (v27 == 0) {
											if (this.mObserverCount != 0) {
												Executor v36 = this.mContext.getMainExecutor();
												if (v36 == 0) {
													CameraManager$CameraManagerGlobal v38 = CameraManager$CameraManagerGlobal.get();
													v38.registerAvailabilityCallback(CameraAccessController, v36, this.mHasOpenCloseListenerPermission);
													this.mObserverCount = (this.mObserverCount + 1);
													SparseArray v40 = VirtualDeviceManagerService.-$$Nest$fgetmVirtualDevices(this.this$0);
													int v41 = v12.getId();
													v40.put(v41, v28);
													return v28;
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
","NORMAL"

"Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl","createVirtualDisplay(Landroid/hardware/display/VirtualDisplayConfig;Landroid/hardware/display/IVirtualDisplayCallback;Landroid/companion/virtual/IVirtualDevice;Ljava/lang/String;)I","0","7 = invokestatic < Application, Landroid/companion/virtual/IVirtualDeviceManager$Stub, getCallingUid()I > @0 exception:6,
8 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
10 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 8 @6 exception:9,
12 = invokestatic < Application, Lcom/android/server/companion/virtual/PermissionUtils, validateCallingPackageName(Landroid/content/Context;Ljava/lang/String;)Z > 10,5 @10 exception:11,
conditional branch(eq, to iindex=-1) 12,13,
30 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
32 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDeviceManagerLock(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Ljava/lang/Object; > 30 @18 exception:31,
monitorenter 32,
33 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
35 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDevices(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 33 @25 exception:34,
37 = invokeinterface < Application, Landroid/companion/virtual/IVirtualDevice, getAssociationId()I > 4 @29 exception:36,
39 = invokevirtual < Application, Landroid/util/SparseArray, get(I)Ljava/lang/Object; > 35,37 @33 exception:38,
40 = checkcast <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl>39 <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl>,
conditional branch(eq, to iindex=-1) 40,13,
monitorexit 32,
51 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, getOwnerUid()I > 40 @42 exception:50,
conditional branch(ne, to iindex=-1) 51,7,
67 = invokestatic < Application, Landroid/os/Binder, clearCallingIdentity()J > @48 exception:66,
69 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, createWindowPolicyController()Lcom/android/server/companion/virtual/GenericWindowPolicyController; > 40 @52 exception:68,
invokestatic < Application, Landroid/os/Binder, restoreCallingIdentity(J)V > 67 @56 exception:72,
73 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
74 = load_metadata: <Application,Landroid/hardware/display/DisplayManagerInternal>, <Primordial,Ljava/lang/Class>,
76 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, access$000(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;Ljava/lang/Class;)Ljava/lang/Object; > 73,74 @63 exception:75,
77 = checkcast <Application,Landroid/hardware/display/DisplayManagerInternal>76 <Application,Landroid/hardware/display/DisplayManagerInternal>,
79 = invokevirtual < Application, Landroid/hardware/display/DisplayManagerInternal, createVirtualDisplay(Landroid/hardware/display/VirtualDisplayConfig;Landroid/hardware/display/IVirtualDisplayCallback;Landroid/companion/virtual/IVirtualDevice;Landroid/window/DisplayWindowPolicyController;Ljava/lang/String;)I > 77,2,3,4,69,5 @75 exception:78,
81 = invokestatic < Application, Landroid/os/Binder, clearCallingIdentity()J > @79 exception:80,
invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, onVirtualDisplayCreatedLocked(Lcom/android/server/companion/virtual/GenericWindowPolicyController;I)V > 40,69,79 @83 exception:82,
invokestatic < Application, Landroid/os/Binder, restoreCallingIdentity(J)V > 81 @86 exception:85,
86 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
88 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmLocalService(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Lcom/android/server/companion/virtual/VirtualDeviceManagerInternal; > 86 @91 exception:87,
invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerInternal, onVirtualDisplayCreated(I)V > 88,79 @95 exception:89,
return 79,","depth : 0
-----
","public int createVirtualDisplay(VirtualDisplayConfig p1, IVirtualDisplayCallback p2, IVirtualDevice p3, String p4){
	long v9 = Binder.clearCallingIdentity();
	GenericWindowPolicyController v10 = v7.createWindowPolicyController();
	Binder.restoreCallingIdentity(v9);
	Object v12 = VirtualDeviceManagerService.access$000(this.this$0, DisplayManagerInterna.class);
	int v13 = v12.createVirtualDisplay(p1, p2, p3, v10, p4);
	long v14 = Binder.clearCallingIdentity();
	v7.onVirtualDisplayCreatedLocked(v10, v13);
	Binder.restoreCallingIdentity(v14);
	VirtualDeviceManagerInternal v17 = VirtualDeviceManagerService.-$$Nest$fgetmLocalService(this.this$0);
	v17.onVirtualDisplayCreated(v13);
	return v13;
}
","NONE"
"Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl","createVirtualDisplay(Landroid/hardware/display/VirtualDisplayConfig;Landroid/hardware/display/IVirtualDisplayCallback;Landroid/companion/virtual/IVirtualDevice;Ljava/lang/String;)I","1","7 = invokestatic < Application, Landroid/companion/virtual/IVirtualDeviceManager$Stub, getCallingUid()I > @0 exception:6,
8 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
10 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 8 @6 exception:9,
12 = invokestatic < Application, Lcom/android/server/companion/virtual/PermissionUtils, validateCallingPackageName(Landroid/content/Context;Ljava/lang/String;)Z > 10,5 @10 exception:11,
conditional branch(eq, to iindex=-1) 12,13,
30 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
32 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDeviceManagerLock(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Ljava/lang/Object; > 30 @18 exception:31,
monitorenter 32,
33 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
35 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDevices(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 33 @25 exception:34,
37 = invokeinterface < Application, Landroid/companion/virtual/IVirtualDevice, getAssociationId()I > 4 @29 exception:36,
39 = invokevirtual < Application, Landroid/util/SparseArray, get(I)Ljava/lang/Object; > 35,37 @33 exception:38,
40 = checkcast <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl>39 <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl>,
conditional branch(eq, to iindex=-1) 40,13,
monitorexit 32,
51 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, getOwnerUid()I > 40 @42 exception:50,
conditional branch(ne, to iindex=-1) 51,7,
67 = invokestatic < Application, Landroid/os/Binder, clearCallingIdentity()J > @48 exception:66,
69 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, createWindowPolicyController()Lcom/android/server/companion/virtual/GenericWindowPolicyController; > 40 @52 exception:68,
2 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDeviceLock, <Application,Ljava/lang/Object> > 1,
monitorenter 2,
3 = new <Application,Lcom/android/server/companion/virtual/GenericWindowPolicyController>@3,
7 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, getAllowedUserHandles()Landroid/util/ArraySet; > 1 @9 exception:6,
8 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
10 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getAllowedCrossTaskNavigations()Ljava/util/Set; > 8 @15 exception:9,
11 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
13 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getBlockedCrossTaskNavigations()Ljava/util/Set; > 11 @21 exception:12,
14 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
16 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getAllowedActivities()Ljava/util/Set; > 14 @27 exception:15,
17 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
19 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getBlockedActivities()Ljava/util/Set; > 17 @33 exception:18,
20 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
22 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getDefaultActivityPolicy()I > 20 @39 exception:21,
24 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, createListenerAdapter()Landroid/companion/virtual/VirtualDeviceManager$ActivityListener; > 1 @43 exception:23,
25 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda2>@47,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda2, <init>(Lcom/android/server/companion/virtual/VirtualDeviceImpl;)V > 25,1 @49 exception:26,
27 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda3>@52,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda3, <init>(Lcom/android/server/companion/virtual/VirtualDeviceImpl;)V > 27,1 @54 exception:28,
29 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mAssociationInfo, <Application,Landroid/companion/AssociationInfo> > 1,
31 = invokevirtual < Application, Landroid/companion/AssociationInfo, getDeviceProfile()Ljava/lang/String; > 29 @59 exception:30,
invokespecial < Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, <init>(IILandroid/util/ArraySet;Ljava/util/Set;Ljava/util/Set;Ljava/util/Set;Ljava/util/Set;ILandroid/companion/virtual/VirtualDeviceManager$ActivityListener;Lcom/android/server/companion/virtual/GenericWindowPolicyController$ActivityBlockedCallback;Lcom/android/server/companion/virtual/GenericWindowPolicyController$SecureWindowCallback;Ljava/lang/String;)V > 3,4,5,7,10,13,16,19,22,24,25,27,31 @64 exception:32,
invokevirtual < Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, registerRunningAppsChangedListener(Lcom/android/server/companion/virtual/GenericWindowPolicyController$RunningAppsChangedListener;)V > 3,1 @67 exception:33,
monitorexit 2,
return 3,
invokestatic < Application, Landroid/os/Binder, restoreCallingIdentity(J)V > 67 @56 exception:72,
73 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
74 = load_metadata: <Application,Landroid/hardware/display/DisplayManagerInternal>, <Primordial,Ljava/lang/Class>,
76 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, access$000(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;Ljava/lang/Class;)Ljava/lang/Object; > 73,74 @63 exception:75,
4 = invokevirtual < Application, Lcom/android/server/SystemService, getLocalService(Ljava/lang/Class;)Ljava/lang/Object; > 1,2 @0 exception:3,
return 4,
77 = checkcast <Application,Landroid/hardware/display/DisplayManagerInternal>76 <Application,Landroid/hardware/display/DisplayManagerInternal>,
79 = invokevirtual < Application, Landroid/hardware/display/DisplayManagerInternal, createVirtualDisplay(Landroid/hardware/display/VirtualDisplayConfig;Landroid/hardware/display/IVirtualDisplayCallback;Landroid/companion/virtual/IVirtualDevice;Landroid/window/DisplayWindowPolicyController;Ljava/lang/String;)I > 77,2,3,4,69,5 @75 exception:78,
81 = invokestatic < Application, Landroid/os/Binder, clearCallingIdentity()J > @79 exception:80,
invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, onVirtualDisplayCreatedLocked(Lcom/android/server/companion/virtual/GenericWindowPolicyController;I)V > 40,69,79 @83 exception:82,
4 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDeviceLock, <Application,Ljava/lang/Object> > 1,
monitorenter 4,
conditional branch(ne, to iindex=-1) 3,5,
6 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDisplayIds, <Application,Ljava/util/Set> > 1,
8 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @10 exception:7,
10 = invokeinterface < Application, Ljava/util/Set, contains(Ljava/lang/Object;)Z > 6,8 @14 exception:9,
conditional branch(ne, to iindex=-1) 10,11,
23 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDisplayIds, <Application,Ljava/util/Set> > 1,
25 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @22 exception:24,
27 = invokeinterface < Application, Ljava/util/Set, add(Ljava/lang/Object;)Z > 23,25 @26 exception:26,
invokevirtual < Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, setDisplayId(I)V > 2,3 @29 exception:28,
29 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mWindowPolicyControllers, <Application,Landroid/util/SparseArray> > 1,
invokevirtual < Application, Landroid/util/SparseArray, put(ILjava/lang/Object;)V > 29,3,2 @34 exception:30,
31 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
32 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mDefaultShowPointerIcon, <Primordial,Z> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setShowPointerIcon(ZI)V > 31,32,3 @41 exception:33,
34 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setPointerAcceleration(FI)V > 34,35,3 @48 exception:36,
37 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setDisplayEligibilityForPointerCapture(ZI)V > 37,11,3 @54 exception:38,
39 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setLocalIme(I)V > 39,3 @59 exception:40,
41 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mPerDisplayWakelocks, <Application,Ljava/util/Map> > 1,
43 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @64 exception:42,
45 = invokeinterface < Application, Ljava/util/Map, containsKey(Ljava/lang/Object;)Z > 41,43 @68 exception:44,
conditional branch(eq, to iindex=-1) 45,11,
46 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mContext, <Application,Landroid/content/Context> > 1,
47 = load_metadata: <Application,Landroid/os/PowerManager>, <Primordial,Ljava/lang/Class>,
49 = invokevirtual < Application, Landroid/content/Context, getSystemService(Ljava/lang/Class;)Ljava/lang/Object; > 46,47 @102 exception:48,
50 = checkcast <Application,Landroid/os/PowerManager>49 <Application,Landroid/os/PowerManager>,
52 = new <Application,Ljava/lang/StringBuilder>@110,
invokespecial < Application, Ljava/lang/StringBuilder, <init>()V > 52 @112 exception:53,
56 = invokevirtual < Application, Ljava/lang/StringBuilder, append(Ljava/lang/String;)Ljava/lang/StringBuilder; > 52,54 @117 exception:55,
58 = invokevirtual < Application, Ljava/lang/StringBuilder, append(I)Ljava/lang/StringBuilder; > 52,3 @120 exception:57,
60 = invokevirtual < Application, Ljava/lang/StringBuilder, toString()Ljava/lang/String; > 52 @123 exception:59,
62 = invokevirtual < Application, Landroid/os/PowerManager, newWakeLock(ILjava/lang/String;I)Landroid/os/PowerManager$WakeLock; > 50,51,60,3 @127 exception:61,
63 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mPerDisplayWakelocks, <Application,Ljava/util/Map> > 1,
65 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @133 exception:64,
67 = invokeinterface < Application, Ljava/util/Map, put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; > 63,65,62 @137 exception:66,
invokevirtual < Application, Landroid/os/PowerManager$WakeLock, acquire()V > 62 @140 exception:68,
monitorexit 4,
return,
invokestatic < Application, Landroid/os/Binder, restoreCallingIdentity(J)V > 81 @86 exception:85,
86 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
88 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmLocalService(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Lcom/android/server/companion/virtual/VirtualDeviceManagerInternal; > 86 @91 exception:87,
2 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, mLocalService, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerInternal> > 1,
return 2,
invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerInternal, onVirtualDisplayCreated(I)V > 88,79 @95 exception:89,
return 79,","depth : 0
-----
depth : 1
-----
depth : 1
-----
depth : 1
-----
depth : 1
-----
","public int createVirtualDisplay(VirtualDisplayConfig p1, IVirtualDisplayCallback p2, IVirtualDevice p3, String p4){
	long v9 = Binder.clearCallingIdentity();
	GenericWindowPolicyController v11 = new GenericWindowPolicyController(8192,524288,v12,v13,v14,v15,v16,v17,v18,v19,v21,v23);
	ArraySet v12 = VirtualDeviceImpl.getAllowedUserHandles();
	Set v13 = this.mParams.getAllowedCrossTaskNavigations();
	Set v14 = this.mParams.getBlockedCrossTaskNavigations();
	Set v15 = this.mParams.getAllowedActivities();
	Set v16 = this.mParams.getBlockedActivities();
	int v17 = this.mParams.getDefaultActivityPolicy();
	VirtualDeviceManager$ActivityListener v18 = VirtualDeviceImpl.createListenerAdapter();
	VirtualDeviceImpl$$ExternalSyntheticLambda2 v19 = new VirtualDeviceImpl$$ExternalSyntheticLambda2(VirtualDeviceImpl);
	VirtualDeviceImpl$$ExternalSyntheticLambda3 v21 = new VirtualDeviceImpl$$ExternalSyntheticLambda3(VirtualDeviceImpl);
	String v23 = this.mAssociationInfo.getDeviceProfile();
	v11.registerRunningAppsChangedListener(VirtualDeviceImpl);
	GenericWindowPolicyController v10 = v11;
	Binder.restoreCallingIdentity(v9);
	Object v28 = this.this$0.getLocalService(DisplayManagerInterna.class);
	Object v27 = v28;
	int v29 = v27.createVirtualDisplay(p1, p2, p3, v10, p4);
	long v30 = Binder.clearCallingIdentity();
	if (v29 != -1) {
		Integer v32 = Integer.valueOf(v29);
		boolean v33 = this.mVirtualDisplayIds.contains(v32);
		if (v33 != 0) {
			Integer v34 = Integer.valueOf(v29);
			boolean v35 = this.mVirtualDisplayIds.add(v34);
			v10.setDisplayId(v29);
			this.mWindowPolicyControllers.put(v29, v10);
			this.mInputController.setShowPointerIcon(this.mDefaultShowPointerIcon, v29);
			this.mInputController.setPointerAcceleration(1065353216, v29);
			this.mInputController.setDisplayEligibilityForPointerCapture(0, v29);
			this.mInputController.setLocalIme(v29);
			Integer v42 = Integer.valueOf(v29);
			boolean v43 = this.mPerDisplayWakelocks.containsKey(v42);
			if (v43 == 0) {
				Object v44 = this.mContext.getSystemService(PowerManage.class);
				StringBuilder v45 = new StringBuilder();
				StringBuilder v47 = v45.append(""VirtualDeviceImpl:"");
				StringBuilder v48 = v45.append(v29);
				String v49 = v45.toString();
				PowerManager$WakeLock v50 = v44.newWakeLock(10, v49, v29);
				Integer v51 = Integer.valueOf(v29);
				Object v52 = this.mPerDisplayWakelocks.put(v51, v50);
				v50.acquire();
				Binder.restoreCallingIdentity(v30);
				VirtualDeviceManagerInternal v55 = this.mLocalService;
				v55.onVirtualDisplayCreated(v29);
				return v29;
			}
		}
	}
}
","NONE"
"Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl","createVirtualDisplay(Landroid/hardware/display/VirtualDisplayConfig;Landroid/hardware/display/IVirtualDisplayCallback;Landroid/companion/virtual/IVirtualDevice;Ljava/lang/String;)I","2","7 = invokestatic < Application, Landroid/companion/virtual/IVirtualDeviceManager$Stub, getCallingUid()I > @0 exception:6,
8 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
10 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 8 @6 exception:9,
12 = invokestatic < Application, Lcom/android/server/companion/virtual/PermissionUtils, validateCallingPackageName(Landroid/content/Context;Ljava/lang/String;)Z > 10,5 @10 exception:11,
conditional branch(eq, to iindex=-1) 12,13,
30 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
32 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDeviceManagerLock(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Ljava/lang/Object; > 30 @18 exception:31,
monitorenter 32,
33 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
35 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDevices(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 33 @25 exception:34,
37 = invokeinterface < Application, Landroid/companion/virtual/IVirtualDevice, getAssociationId()I > 4 @29 exception:36,
39 = invokevirtual < Application, Landroid/util/SparseArray, get(I)Ljava/lang/Object; > 35,37 @33 exception:38,
40 = checkcast <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl>39 <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl>,
conditional branch(eq, to iindex=-1) 40,13,
monitorexit 32,
51 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, getOwnerUid()I > 40 @42 exception:50,
conditional branch(ne, to iindex=-1) 51,7,
67 = invokestatic < Application, Landroid/os/Binder, clearCallingIdentity()J > @48 exception:66,
69 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, createWindowPolicyController()Lcom/android/server/companion/virtual/GenericWindowPolicyController; > 40 @52 exception:68,
2 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDeviceLock, <Application,Ljava/lang/Object> > 1,
monitorenter 2,
3 = new <Application,Lcom/android/server/companion/virtual/GenericWindowPolicyController>@3,
7 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, getAllowedUserHandles()Landroid/util/ArraySet; > 1 @9 exception:6,
2 = new <Application,Landroid/util/ArraySet>@0,
invokespecial < Application, Landroid/util/ArraySet, <init>()V > 2 @2 exception:3,
4 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mContext, <Application,Landroid/content/Context> > 1,
5 = load_metadata: <Application,Landroid/app/admin/DevicePolicyManager>, <Primordial,Ljava/lang/Class>,
7 = invokevirtual < Application, Landroid/content/Context, getSystemService(Ljava/lang/Class;)Ljava/lang/Object; > 4,5 @9 exception:6,
8 = checkcast <Application,Landroid/app/admin/DevicePolicyManager>7 <Application,Landroid/app/admin/DevicePolicyManager>,
9 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mContext, <Application,Landroid/content/Context> > 1,
10 = load_metadata: <Application,Landroid/os/UserManager>, <Primordial,Ljava/lang/Class>,
12 = invokevirtual < Application, Landroid/content/Context, getSystemService(Ljava/lang/Class;)Ljava/lang/Object; > 9,10 @19 exception:11,
13 = checkcast <Application,Landroid/os/UserManager>12 <Application,Landroid/os/UserManager>,
15 = invokevirtual < Application, Landroid/os/UserManager, getAllProfiles()Ljava/util/List; > 13 @25 exception:14,
17 = invokeinterface < Application, Ljava/util/List, iterator()Ljava/util/Iterator; > 15 @29 exception:16,
19 = invokeinterface < Application, Ljava/util/Iterator, hasNext()Z > 17 @33 exception:18,
conditional branch(eq, to iindex=-1) 19,20,
22 = invokeinterface < Application, Ljava/util/Iterator, next()Ljava/lang/Object; > 17 @39 exception:21,
23 = checkcast <Application,Landroid/os/UserHandle>22 <Application,Landroid/os/UserHandle>,
25 = invokevirtual < Application, Landroid/os/UserHandle, getIdentifier()I > 23 @45 exception:24,
27 = invokevirtual < Application, Landroid/app/admin/DevicePolicyManager, getNearbyAppStreamingPolicy(I)I > 8,25 @49 exception:26,
conditional branch(eq, to iindex=-1) 27,28,
conditional branch(ne, to iindex=-1) 27,20,
goto (from iindex= 29 to iindex = 20),
42 = invokevirtual < Application, Landroid/util/ArraySet, add(Ljava/lang/Object;)Z > 2,23 @78 exception:41,
goto (from iindex= 41 to iindex = -48),
19 = invokeinterface < Application, Ljava/util/Iterator, hasNext()Z > 17 @33 exception:18,
conditional branch(eq, to iindex=-1) 19,20,
return 2,
8 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
10 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getAllowedCrossTaskNavigations()Ljava/util/Set; > 8 @15 exception:9,
2 = getfield < Application, Landroid/companion/virtual/VirtualDeviceParams, mAllowedCrossTaskNavigations, <Application,Landroid/util/ArraySet> > 1,
4 = invokestatic < Application, Ljava/util/Collections, unmodifiableSet(Ljava/util/Set;)Ljava/util/Set; > 2 @2 exception:3,
return 4,
11 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
13 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getBlockedCrossTaskNavigations()Ljava/util/Set; > 11 @21 exception:12,
2 = getfield < Application, Landroid/companion/virtual/VirtualDeviceParams, mBlockedCrossTaskNavigations, <Application,Landroid/util/ArraySet> > 1,
4 = invokestatic < Application, Ljava/util/Collections, unmodifiableSet(Ljava/util/Set;)Ljava/util/Set; > 2 @2 exception:3,
return 4,
14 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
16 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getAllowedActivities()Ljava/util/Set; > 14 @27 exception:15,
2 = getfield < Application, Landroid/companion/virtual/VirtualDeviceParams, mAllowedActivities, <Application,Landroid/util/ArraySet> > 1,
4 = invokestatic < Application, Ljava/util/Collections, unmodifiableSet(Ljava/util/Set;)Ljava/util/Set; > 2 @2 exception:3,
return 4,
17 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
19 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getBlockedActivities()Ljava/util/Set; > 17 @33 exception:18,
2 = getfield < Application, Landroid/companion/virtual/VirtualDeviceParams, mBlockedActivities, <Application,Landroid/util/ArraySet> > 1,
4 = invokestatic < Application, Ljava/util/Collections, unmodifiableSet(Ljava/util/Set;)Ljava/util/Set; > 2 @2 exception:3,
return 4,
20 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
22 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getDefaultActivityPolicy()I > 20 @39 exception:21,
2 = getfield < Application, Landroid/companion/virtual/VirtualDeviceParams, mDefaultActivityPolicy, <Primordial,I> > 1,
return 2,
24 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, createListenerAdapter()Landroid/companion/virtual/VirtualDeviceManager$ActivityListener; > 1 @43 exception:23,
2 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl$1>@0,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl$1, <init>(Lcom/android/server/companion/virtual/VirtualDeviceImpl;)V > 2,1 @2 exception:3,
return 2,
25 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda2>@47,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda2, <init>(Lcom/android/server/companion/virtual/VirtualDeviceImpl;)V > 25,1 @49 exception:26,
27 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda3>@52,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda3, <init>(Lcom/android/server/companion/virtual/VirtualDeviceImpl;)V > 27,1 @54 exception:28,
29 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mAssociationInfo, <Application,Landroid/companion/AssociationInfo> > 1,
31 = invokevirtual < Application, Landroid/companion/AssociationInfo, getDeviceProfile()Ljava/lang/String; > 29 @59 exception:30,
2 = getfield < Application, Landroid/companion/AssociationInfo, mDeviceProfile, <Application,Ljava/lang/String> > 1,
return 2,
invokespecial < Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, <init>(IILandroid/util/ArraySet;Ljava/util/Set;Ljava/util/Set;Ljava/util/Set;Ljava/util/Set;ILandroid/companion/virtual/VirtualDeviceManager$ActivityListener;Lcom/android/server/companion/virtual/GenericWindowPolicyController$ActivityBlockedCallback;Lcom/android/server/companion/virtual/GenericWindowPolicyController$SecureWindowCallback;Ljava/lang/String;)V > 3,4,5,7,10,13,16,19,22,24,25,27,31 @64 exception:32,
invokevirtual < Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, registerRunningAppsChangedListener(Lcom/android/server/companion/virtual/GenericWindowPolicyController$RunningAppsChangedListener;)V > 3,1 @67 exception:33,
3 = getfield < Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, mRunningAppsChangedListener, <Application,Landroid/util/ArraySet> > 1,
5 = invokevirtual < Application, Landroid/util/ArraySet, add(Ljava/lang/Object;)Z > 3,2 @2 exception:4,
return,
monitorexit 2,
return 3,
invokestatic < Application, Landroid/os/Binder, restoreCallingIdentity(J)V > 67 @56 exception:72,
73 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
74 = load_metadata: <Application,Landroid/hardware/display/DisplayManagerInternal>, <Primordial,Ljava/lang/Class>,
76 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, access$000(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;Ljava/lang/Class;)Ljava/lang/Object; > 73,74 @63 exception:75,
77 = checkcast <Application,Landroid/hardware/display/DisplayManagerInternal>76 <Application,Landroid/hardware/display/DisplayManagerInternal>,
79 = invokevirtual < Application, Landroid/hardware/display/DisplayManagerInternal, createVirtualDisplay(Landroid/hardware/display/VirtualDisplayConfig;Landroid/hardware/display/IVirtualDisplayCallback;Landroid/companion/virtual/IVirtualDevice;Landroid/window/DisplayWindowPolicyController;Ljava/lang/String;)I > 77,2,3,4,69,5 @75 exception:78,
81 = invokestatic < Application, Landroid/os/Binder, clearCallingIdentity()J > @79 exception:80,
invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, onVirtualDisplayCreatedLocked(Lcom/android/server/companion/virtual/GenericWindowPolicyController;I)V > 40,69,79 @83 exception:82,
4 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDeviceLock, <Application,Ljava/lang/Object> > 1,
monitorenter 4,
conditional branch(ne, to iindex=-1) 3,5,
6 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDisplayIds, <Application,Ljava/util/Set> > 1,
8 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @10 exception:7,
10 = invokeinterface < Application, Ljava/util/Set, contains(Ljava/lang/Object;)Z > 6,8 @14 exception:9,
conditional branch(ne, to iindex=-1) 10,11,
23 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDisplayIds, <Application,Ljava/util/Set> > 1,
25 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @22 exception:24,
27 = invokeinterface < Application, Ljava/util/Set, add(Ljava/lang/Object;)Z > 23,25 @26 exception:26,
invokevirtual < Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, setDisplayId(I)V > 2,3 @29 exception:28,
putfield 1.< Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, mDisplayId, <Primordial,I> > = 2,
return,
29 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mWindowPolicyControllers, <Application,Landroid/util/SparseArray> > 1,
invokevirtual < Application, Landroid/util/SparseArray, put(ILjava/lang/Object;)V > 29,3,2 @34 exception:30,
31 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
32 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mDefaultShowPointerIcon, <Primordial,Z> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setShowPointerIcon(ZI)V > 31,32,3 @41 exception:33,
4 = getfield < Application, Lcom/android/server/companion/virtual/InputController, mInputManagerInternal, <Application,Landroid/hardware/input/InputManagerInternal> > 1,
invokevirtual < Application, Landroid/hardware/input/InputManagerInternal, setPointerIconVisible(ZI)V > 4,2,3 @2 exception:5,
return,
34 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setPointerAcceleration(FI)V > 34,35,3 @48 exception:36,
4 = getfield < Application, Lcom/android/server/companion/virtual/InputController, mInputManagerInternal, <Application,Landroid/hardware/input/InputManagerInternal> > 1,
invokevirtual < Application, Landroid/hardware/input/InputManagerInternal, setPointerAcceleration(FI)V > 4,2,3 @2 exception:5,
return,
37 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setDisplayEligibilityForPointerCapture(ZI)V > 37,11,3 @54 exception:38,
4 = getfield < Application, Lcom/android/server/companion/virtual/InputController, mInputManagerInternal, <Application,Landroid/hardware/input/InputManagerInternal> > 1,
invokevirtual < Application, Landroid/hardware/input/InputManagerInternal, setDisplayEligibilityForPointerCapture(IZ)V > 4,3,2 @2 exception:5,
return,
39 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setLocalIme(I)V > 39,3 @59 exception:40,
3 = getfield < Application, Lcom/android/server/companion/virtual/InputController, mDisplayManagerInternal, <Application,Landroid/hardware/display/DisplayManagerInternal> > 1,
5 = invokevirtual < Application, Landroid/hardware/display/DisplayManagerInternal, getDisplayInfo(I)Landroid/view/DisplayInfo; > 3,2 @2 exception:4,
6 = getfield < Application, Landroid/view/DisplayInfo, flags, <Primordial,I> > 5,
8 = binaryop(and) 6 , 7,
conditional branch(ne, to iindex=-1) 8,7,
9 = getfield < Application, Lcom/android/server/companion/virtual/InputController, mWindowManager, <Application,Landroid/view/WindowManager> > 1,
invokeinterface < Application, Landroid/view/WindowManager, setDisplayImePolicy(II)V > 9,2,10 @16 exception:11,
return,
41 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mPerDisplayWakelocks, <Application,Ljava/util/Map> > 1,
43 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @64 exception:42,
45 = invokeinterface < Application, Ljava/util/Map, containsKey(Ljava/lang/Object;)Z > 41,43 @68 exception:44,
conditional branch(eq, to iindex=-1) 45,11,
46 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mContext, <Application,Landroid/content/Context> > 1,
47 = load_metadata: <Application,Landroid/os/PowerManager>, <Primordial,Ljava/lang/Class>,
49 = invokevirtual < Application, Landroid/content/Context, getSystemService(Ljava/lang/Class;)Ljava/lang/Object; > 46,47 @102 exception:48,
50 = checkcast <Application,Landroid/os/PowerManager>49 <Application,Landroid/os/PowerManager>,
52 = new <Application,Ljava/lang/StringBuilder>@110,
invokespecial < Application, Ljava/lang/StringBuilder, <init>()V > 52 @112 exception:53,
56 = invokevirtual < Application, Ljava/lang/StringBuilder, append(Ljava/lang/String;)Ljava/lang/StringBuilder; > 52,54 @117 exception:55,
58 = invokevirtual < Application, Ljava/lang/StringBuilder, append(I)Ljava/lang/StringBuilder; > 52,3 @120 exception:57,
60 = invokevirtual < Application, Ljava/lang/StringBuilder, toString()Ljava/lang/String; > 52 @123 exception:59,
62 = invokevirtual < Application, Landroid/os/PowerManager, newWakeLock(ILjava/lang/String;I)Landroid/os/PowerManager$WakeLock; > 50,51,60,3 @127 exception:61,
63 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mPerDisplayWakelocks, <Application,Ljava/util/Map> > 1,
65 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @133 exception:64,
67 = invokeinterface < Application, Ljava/util/Map, put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; > 63,65,62 @137 exception:66,
invokevirtual < Application, Landroid/os/PowerManager$WakeLock, acquire()V > 62 @140 exception:68,
monitorexit 4,
return,
invokestatic < Application, Landroid/os/Binder, restoreCallingIdentity(J)V > 81 @86 exception:85,
86 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
88 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmLocalService(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Lcom/android/server/companion/virtual/VirtualDeviceManagerInternal; > 86 @91 exception:87,
invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerInternal, onVirtualDisplayCreated(I)V > 88,79 @95 exception:89,
return 79,","depth : 0
-----
depth : 1
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 1
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
","public int createVirtualDisplay(VirtualDisplayConfig p1, IVirtualDisplayCallback p2, IVirtualDevice p3, String p4){
	long v9 = Binder.clearCallingIdentity();
	GenericWindowPolicyController v11 = new GenericWindowPolicyController(8192,524288,v12,v25,v27,v29,v31,v33,v34,v37,v39,v41);
	ArraySet v13 = new ArraySet();
	Object v15 = this.mContext.getSystemService(DevicePolicyManage.class);
	Object v16 = this.mContext.getSystemService(UserManage.class);
	List v17 = v16.getAllProfiles();
	Iterator v18 = v17.iterator();
	boolean v19 = v18.hasNext();
	if (v19 == 0) {
		Object v20 = v18.next();
		int v21 = v20.getIdentifier();
		int v22 = v15.getNearbyAppStreamingPolicy(v21);
		if (v22 == 2) {
			if (v22 != 0) {
				boolean v23 = v13.add(v20);
				boolean v24 = v18.hasNext();
				if (v24 == 0) {
					ArraySet v12 = v13;
					Set v26 = Collections.unmodifiableSet(this.mAllowedCrossTaskNavigations);
					Set v25 = v26;
					Set v28 = Collections.unmodifiableSet(this.mBlockedCrossTaskNavigations);
					Set v27 = v28;
					Set v30 = Collections.unmodifiableSet(this.mAllowedActivities);
					Set v29 = v30;
					Set v32 = Collections.unmodifiableSet(this.mBlockedActivities);
					Set v31 = v32;
					int v33 = this.mDefaultActivityPolicy;
					VirtualDeviceImpl$1 v35 = new VirtualDeviceImpl$1(VirtualDeviceImpl);
					VirtualDeviceManager$ActivityListener v34 = v35;
					VirtualDeviceImpl$$ExternalSyntheticLambda2 v37 = new VirtualDeviceImpl$$ExternalSyntheticLambda2(VirtualDeviceImpl);
					VirtualDeviceImpl$$ExternalSyntheticLambda3 v39 = new VirtualDeviceImpl$$ExternalSyntheticLambda3(VirtualDeviceImpl);
					String v41 = this.mDeviceProfile;
					boolean v44 = this.mRunningAppsChangedListener.add(VirtualDeviceImpl);
					GenericWindowPolicyController v10 = v11;
					Binder.restoreCallingIdentity(v9);
					Object v46 = VirtualDeviceManagerService.access$000(this.this$0, DisplayManagerInterna.class);
					int v47 = v46.createVirtualDisplay(p1, p2, p3, v10, p4);
					long v48 = Binder.clearCallingIdentity();
					if (v47 != -1) {
						Integer v50 = Integer.valueOf(v47);
						boolean v51 = this.mVirtualDisplayIds.contains(v50);
						if (v51 != 0) {
							Integer v52 = Integer.valueOf(v47);
							boolean v53 = this.mVirtualDisplayIds.add(v52);
							this.mDisplayId = v47;
							this.mWindowPolicyControllers.put(v47, v10);
							this.mInputManagerInternal.setPointerIconVisible(this.mDefaultShowPointerIcon, v47);
							this.mInputManagerInternal.setPointerAcceleration(1065353216, v47);
							this.mInputManagerInternal.setDisplayEligibilityForPointerCapture(v47, 0);
							DisplayInfo v63 = this.mDisplayManagerInternal.getDisplayInfo(v47);
							if ((DisplayInfo.flags & 128) != 128) {
								this.mWindowManager.setDisplayImePolicy(v47, 0);
								Integer v65 = Integer.valueOf(v47);
								boolean v66 = this.mPerDisplayWakelocks.containsKey(v65);
								if (v66 == 0) {
									Object v67 = this.mContext.getSystemService(PowerManage.class);
									StringBuilder v68 = new StringBuilder();
									StringBuilder v70 = v68.append(""VirtualDeviceImpl:"");
									StringBuilder v71 = v68.append(v47);
									String v72 = v68.toString();
									PowerManager$WakeLock v73 = v67.newWakeLock(10, v72, v47);
									Integer v74 = Integer.valueOf(v47);
									Object v75 = this.mPerDisplayWakelocks.put(v74, v73);
									v73.acquire();
									Binder.restoreCallingIdentity(v48);
									VirtualDeviceManagerInternal v78 = VirtualDeviceManagerService.-$$Nest$fgetmLocalService(this.this$0);
									v78.onVirtualDisplayCreated(v47);
									return v47;
								}
							}
						}
					}
				}
			}
		}
	}
}
","NONE"
"Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl","createVirtualDisplay(Landroid/hardware/display/VirtualDisplayConfig;Landroid/hardware/display/IVirtualDisplayCallback;Landroid/companion/virtual/IVirtualDevice;Ljava/lang/String;)I","2","7 = invokestatic < Application, Landroid/companion/virtual/IVirtualDeviceManager$Stub, getCallingUid()I > @0 exception:6,
8 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
10 = invokevirtual < Application, Lcom/android/server/SystemService, getContext()Landroid/content/Context; > 8 @6 exception:9,
12 = invokestatic < Application, Lcom/android/server/companion/virtual/PermissionUtils, validateCallingPackageName(Landroid/content/Context;Ljava/lang/String;)Z > 10,5 @10 exception:11,
conditional branch(eq, to iindex=-1) 12,13,
30 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
32 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDeviceManagerLock(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Ljava/lang/Object; > 30 @18 exception:31,
monitorenter 32,
33 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
35 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmVirtualDevices(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Landroid/util/SparseArray; > 33 @25 exception:34,
37 = invokeinterface < Application, Landroid/companion/virtual/IVirtualDevice, getAssociationId()I > 4 @29 exception:36,
39 = invokevirtual < Application, Landroid/util/SparseArray, get(I)Ljava/lang/Object; > 35,37 @33 exception:38,
40 = checkcast <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl>39 <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl>,
conditional branch(eq, to iindex=-1) 40,13,
monitorexit 32,
51 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, getOwnerUid()I > 40 @42 exception:50,
conditional branch(ne, to iindex=-1) 51,7,
67 = invokestatic < Application, Landroid/os/Binder, clearCallingIdentity()J > @48 exception:66,
69 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, createWindowPolicyController()Lcom/android/server/companion/virtual/GenericWindowPolicyController; > 40 @52 exception:68,
2 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDeviceLock, <Application,Ljava/lang/Object> > 1,
monitorenter 2,
3 = new <Application,Lcom/android/server/companion/virtual/GenericWindowPolicyController>@3,
7 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, getAllowedUserHandles()Landroid/util/ArraySet; > 1 @9 exception:6,
2 = new <Application,Landroid/util/ArraySet>@0,
invokespecial < Application, Landroid/util/ArraySet, <init>()V > 2 @2 exception:3,
4 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mContext, <Application,Landroid/content/Context> > 1,
5 = load_metadata: <Application,Landroid/app/admin/DevicePolicyManager>, <Primordial,Ljava/lang/Class>,
7 = invokevirtual < Application, Landroid/content/Context, getSystemService(Ljava/lang/Class;)Ljava/lang/Object; > 4,5 @9 exception:6,
8 = checkcast <Application,Landroid/app/admin/DevicePolicyManager>7 <Application,Landroid/app/admin/DevicePolicyManager>,
9 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mContext, <Application,Landroid/content/Context> > 1,
10 = load_metadata: <Application,Landroid/os/UserManager>, <Primordial,Ljava/lang/Class>,
12 = invokevirtual < Application, Landroid/content/Context, getSystemService(Ljava/lang/Class;)Ljava/lang/Object; > 9,10 @19 exception:11,
13 = checkcast <Application,Landroid/os/UserManager>12 <Application,Landroid/os/UserManager>,
15 = invokevirtual < Application, Landroid/os/UserManager, getAllProfiles()Ljava/util/List; > 13 @25 exception:14,
17 = invokeinterface < Application, Ljava/util/List, iterator()Ljava/util/Iterator; > 15 @29 exception:16,
19 = invokeinterface < Application, Ljava/util/Iterator, hasNext()Z > 17 @33 exception:18,
conditional branch(eq, to iindex=-1) 19,20,
22 = invokeinterface < Application, Ljava/util/Iterator, next()Ljava/lang/Object; > 17 @39 exception:21,
23 = checkcast <Application,Landroid/os/UserHandle>22 <Application,Landroid/os/UserHandle>,
25 = invokevirtual < Application, Landroid/os/UserHandle, getIdentifier()I > 23 @45 exception:24,
27 = invokevirtual < Application, Landroid/app/admin/DevicePolicyManager, getNearbyAppStreamingPolicy(I)I > 8,25 @49 exception:26,
conditional branch(eq, to iindex=-1) 27,28,
conditional branch(ne, to iindex=-1) 27,20,
conditional branch(ne, to iindex=-1) 27,29,
33 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
35 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getUsersWithMatchingAccounts()Ljava/util/Set; > 33 @64 exception:34,
37 = invokeinterface < Application, Ljava/util/Set, contains(Ljava/lang/Object;)Z > 35,23 @68 exception:36,
conditional branch(eq, to iindex=-1) 37,20,
40 = invokevirtual < Application, Landroid/util/ArraySet, add(Ljava/lang/Object;)Z > 2,23 @74 exception:39,
goto (from iindex= 39 to iindex = -44),
19 = invokeinterface < Application, Ljava/util/Iterator, hasNext()Z > 17 @33 exception:18,
conditional branch(eq, to iindex=-1) 19,20,
return 2,
8 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
10 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getAllowedCrossTaskNavigations()Ljava/util/Set; > 8 @15 exception:9,
2 = getfield < Application, Landroid/companion/virtual/VirtualDeviceParams, mAllowedCrossTaskNavigations, <Application,Landroid/util/ArraySet> > 1,
4 = invokestatic < Application, Ljava/util/Collections, unmodifiableSet(Ljava/util/Set;)Ljava/util/Set; > 2 @2 exception:3,
return 4,
11 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
13 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getBlockedCrossTaskNavigations()Ljava/util/Set; > 11 @21 exception:12,
2 = getfield < Application, Landroid/companion/virtual/VirtualDeviceParams, mBlockedCrossTaskNavigations, <Application,Landroid/util/ArraySet> > 1,
4 = invokestatic < Application, Ljava/util/Collections, unmodifiableSet(Ljava/util/Set;)Ljava/util/Set; > 2 @2 exception:3,
return 4,
14 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
16 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getAllowedActivities()Ljava/util/Set; > 14 @27 exception:15,
2 = getfield < Application, Landroid/companion/virtual/VirtualDeviceParams, mAllowedActivities, <Application,Landroid/util/ArraySet> > 1,
4 = invokestatic < Application, Ljava/util/Collections, unmodifiableSet(Ljava/util/Set;)Ljava/util/Set; > 2 @2 exception:3,
return 4,
17 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
19 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getBlockedActivities()Ljava/util/Set; > 17 @33 exception:18,
2 = getfield < Application, Landroid/companion/virtual/VirtualDeviceParams, mBlockedActivities, <Application,Landroid/util/ArraySet> > 1,
4 = invokestatic < Application, Ljava/util/Collections, unmodifiableSet(Ljava/util/Set;)Ljava/util/Set; > 2 @2 exception:3,
return 4,
20 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mParams, <Application,Landroid/companion/virtual/VirtualDeviceParams> > 1,
22 = invokevirtual < Application, Landroid/companion/virtual/VirtualDeviceParams, getDefaultActivityPolicy()I > 20 @39 exception:21,
2 = getfield < Application, Landroid/companion/virtual/VirtualDeviceParams, mDefaultActivityPolicy, <Primordial,I> > 1,
return 2,
24 = invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, createListenerAdapter()Landroid/companion/virtual/VirtualDeviceManager$ActivityListener; > 1 @43 exception:23,
2 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl$1>@0,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl$1, <init>(Lcom/android/server/companion/virtual/VirtualDeviceImpl;)V > 2,1 @2 exception:3,
return 2,
25 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda2>@47,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda2, <init>(Lcom/android/server/companion/virtual/VirtualDeviceImpl;)V > 25,1 @49 exception:26,
27 = new <Application,Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda3>@52,
invokespecial < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl$$ExternalSyntheticLambda3, <init>(Lcom/android/server/companion/virtual/VirtualDeviceImpl;)V > 27,1 @54 exception:28,
29 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mAssociationInfo, <Application,Landroid/companion/AssociationInfo> > 1,
31 = invokevirtual < Application, Landroid/companion/AssociationInfo, getDeviceProfile()Ljava/lang/String; > 29 @59 exception:30,
2 = getfield < Application, Landroid/companion/AssociationInfo, mDeviceProfile, <Application,Ljava/lang/String> > 1,
return 2,
invokespecial < Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, <init>(IILandroid/util/ArraySet;Ljava/util/Set;Ljava/util/Set;Ljava/util/Set;Ljava/util/Set;ILandroid/companion/virtual/VirtualDeviceManager$ActivityListener;Lcom/android/server/companion/virtual/GenericWindowPolicyController$ActivityBlockedCallback;Lcom/android/server/companion/virtual/GenericWindowPolicyController$SecureWindowCallback;Ljava/lang/String;)V > 3,4,5,7,10,13,16,19,22,24,25,27,31 @64 exception:32,
invokevirtual < Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, registerRunningAppsChangedListener(Lcom/android/server/companion/virtual/GenericWindowPolicyController$RunningAppsChangedListener;)V > 3,1 @67 exception:33,
3 = getfield < Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, mRunningAppsChangedListener, <Application,Landroid/util/ArraySet> > 1,
5 = invokevirtual < Application, Landroid/util/ArraySet, add(Ljava/lang/Object;)Z > 3,2 @2 exception:4,
return,
monitorexit 2,
return 3,
invokestatic < Application, Landroid/os/Binder, restoreCallingIdentity(J)V > 67 @56 exception:72,
73 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
74 = load_metadata: <Application,Landroid/hardware/display/DisplayManagerInternal>, <Primordial,Ljava/lang/Class>,
76 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, access$000(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;Ljava/lang/Class;)Ljava/lang/Object; > 73,74 @63 exception:75,
77 = checkcast <Application,Landroid/hardware/display/DisplayManagerInternal>76 <Application,Landroid/hardware/display/DisplayManagerInternal>,
79 = invokevirtual < Application, Landroid/hardware/display/DisplayManagerInternal, createVirtualDisplay(Landroid/hardware/display/VirtualDisplayConfig;Landroid/hardware/display/IVirtualDisplayCallback;Landroid/companion/virtual/IVirtualDevice;Landroid/window/DisplayWindowPolicyController;Ljava/lang/String;)I > 77,2,3,4,69,5 @75 exception:78,
81 = invokestatic < Application, Landroid/os/Binder, clearCallingIdentity()J > @79 exception:80,
invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, onVirtualDisplayCreatedLocked(Lcom/android/server/companion/virtual/GenericWindowPolicyController;I)V > 40,69,79 @83 exception:82,
4 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDeviceLock, <Application,Ljava/lang/Object> > 1,
monitorenter 4,
conditional branch(ne, to iindex=-1) 3,5,
6 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDisplayIds, <Application,Ljava/util/Set> > 1,
8 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @10 exception:7,
10 = invokeinterface < Application, Ljava/util/Set, contains(Ljava/lang/Object;)Z > 6,8 @14 exception:9,
conditional branch(ne, to iindex=-1) 10,11,
23 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mVirtualDisplayIds, <Application,Ljava/util/Set> > 1,
25 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @22 exception:24,
27 = invokeinterface < Application, Ljava/util/Set, add(Ljava/lang/Object;)Z > 23,25 @26 exception:26,
invokevirtual < Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, setDisplayId(I)V > 2,3 @29 exception:28,
putfield 1.< Application, Lcom/android/server/companion/virtual/GenericWindowPolicyController, mDisplayId, <Primordial,I> > = 2,
return,
29 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mWindowPolicyControllers, <Application,Landroid/util/SparseArray> > 1,
invokevirtual < Application, Landroid/util/SparseArray, put(ILjava/lang/Object;)V > 29,3,2 @34 exception:30,
31 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
32 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mDefaultShowPointerIcon, <Primordial,Z> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setShowPointerIcon(ZI)V > 31,32,3 @41 exception:33,
4 = getfield < Application, Lcom/android/server/companion/virtual/InputController, mInputManagerInternal, <Application,Landroid/hardware/input/InputManagerInternal> > 1,
invokevirtual < Application, Landroid/hardware/input/InputManagerInternal, setPointerIconVisible(ZI)V > 4,2,3 @2 exception:5,
return,
34 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setPointerAcceleration(FI)V > 34,35,3 @48 exception:36,
4 = getfield < Application, Lcom/android/server/companion/virtual/InputController, mInputManagerInternal, <Application,Landroid/hardware/input/InputManagerInternal> > 1,
invokevirtual < Application, Landroid/hardware/input/InputManagerInternal, setPointerAcceleration(FI)V > 4,2,3 @2 exception:5,
return,
37 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setDisplayEligibilityForPointerCapture(ZI)V > 37,11,3 @54 exception:38,
4 = getfield < Application, Lcom/android/server/companion/virtual/InputController, mInputManagerInternal, <Application,Landroid/hardware/input/InputManagerInternal> > 1,
invokevirtual < Application, Landroid/hardware/input/InputManagerInternal, setDisplayEligibilityForPointerCapture(IZ)V > 4,3,2 @2 exception:5,
return,
39 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mInputController, <Application,Lcom/android/server/companion/virtual/InputController> > 1,
invokevirtual < Application, Lcom/android/server/companion/virtual/InputController, setLocalIme(I)V > 39,3 @59 exception:40,
3 = getfield < Application, Lcom/android/server/companion/virtual/InputController, mDisplayManagerInternal, <Application,Landroid/hardware/display/DisplayManagerInternal> > 1,
5 = invokevirtual < Application, Landroid/hardware/display/DisplayManagerInternal, getDisplayInfo(I)Landroid/view/DisplayInfo; > 3,2 @2 exception:4,
6 = getfield < Application, Landroid/view/DisplayInfo, flags, <Primordial,I> > 5,
8 = binaryop(and) 6 , 7,
conditional branch(ne, to iindex=-1) 8,7,
9 = getfield < Application, Lcom/android/server/companion/virtual/InputController, mWindowManager, <Application,Landroid/view/WindowManager> > 1,
invokeinterface < Application, Landroid/view/WindowManager, setDisplayImePolicy(II)V > 9,2,10 @16 exception:11,
return,
41 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mPerDisplayWakelocks, <Application,Ljava/util/Map> > 1,
43 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @64 exception:42,
45 = invokeinterface < Application, Ljava/util/Map, containsKey(Ljava/lang/Object;)Z > 41,43 @68 exception:44,
conditional branch(eq, to iindex=-1) 45,11,
46 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mContext, <Application,Landroid/content/Context> > 1,
47 = load_metadata: <Application,Landroid/os/PowerManager>, <Primordial,Ljava/lang/Class>,
49 = invokevirtual < Application, Landroid/content/Context, getSystemService(Ljava/lang/Class;)Ljava/lang/Object; > 46,47 @102 exception:48,
50 = checkcast <Application,Landroid/os/PowerManager>49 <Application,Landroid/os/PowerManager>,
52 = new <Application,Ljava/lang/StringBuilder>@110,
invokespecial < Application, Ljava/lang/StringBuilder, <init>()V > 52 @112 exception:53,
56 = invokevirtual < Application, Ljava/lang/StringBuilder, append(Ljava/lang/String;)Ljava/lang/StringBuilder; > 52,54 @117 exception:55,
58 = invokevirtual < Application, Ljava/lang/StringBuilder, append(I)Ljava/lang/StringBuilder; > 52,3 @120 exception:57,
60 = invokevirtual < Application, Ljava/lang/StringBuilder, toString()Ljava/lang/String; > 52 @123 exception:59,
62 = invokevirtual < Application, Landroid/os/PowerManager, newWakeLock(ILjava/lang/String;I)Landroid/os/PowerManager$WakeLock; > 50,51,60,3 @127 exception:61,
63 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceImpl, mPerDisplayWakelocks, <Application,Ljava/util/Map> > 1,
65 = invokestatic < Application, Ljava/lang/Integer, valueOf(I)Ljava/lang/Integer; > 3 @133 exception:64,
67 = invokeinterface < Application, Ljava/util/Map, put(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object; > 63,65,62 @137 exception:66,
invokevirtual < Application, Landroid/os/PowerManager$WakeLock, acquire()V > 62 @140 exception:68,
monitorexit 4,
return,
invokestatic < Application, Landroid/os/Binder, restoreCallingIdentity(J)V > 81 @86 exception:85,
86 = getfield < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService$VirtualDeviceManagerImpl, this$0, <Application,Lcom/android/server/companion/virtual/VirtualDeviceManagerService> > 1,
88 = invokestatic < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerService, -$$Nest$fgetmLocalService(Lcom/android/server/companion/virtual/VirtualDeviceManagerService;)Lcom/android/server/companion/virtual/VirtualDeviceManagerInternal; > 86 @91 exception:87,
invokevirtual < Application, Lcom/android/server/companion/virtual/VirtualDeviceManagerInternal, onVirtualDisplayCreated(I)V > 88,79 @95 exception:89,
return 79,","depth : 0
-----
depth : 1
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 1
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
depth : 2
-----
","public int createVirtualDisplay(VirtualDisplayConfig p1, IVirtualDisplayCallback p2, IVirtualDevice p3, String p4){
	long v9 = Binder.clearCallingIdentity();
	GenericWindowPolicyController v11 = new GenericWindowPolicyController(8192,524288,v12,v27,v29,v31,v33,v35,v36,v39,v41,v43);
	ArraySet v13 = new ArraySet();
	Object v15 = this.mContext.getSystemService(DevicePolicyManage.class);
	Object v16 = this.mContext.getSystemService(UserManage.class);
	List v17 = v16.getAllProfiles();
	Iterator v18 = v17.iterator();
	boolean v19 = v18.hasNext();
	if (v19 == 0) {
		Object v20 = v18.next();
		int v21 = v20.getIdentifier();
		int v22 = v15.getNearbyAppStreamingPolicy(v21);
		if (v22 == 2) {
			if (v22 != 0) {
				if (v22 != 3) {
					Set v23 = this.mParams.getUsersWithMatchingAccounts();
					boolean v24 = v23.contains(v20);
					if (v24 == 0) {
						boolean v25 = v13.add(v20);
						boolean v26 = v18.hasNext();
						if (v26 == 0) {
							ArraySet v12 = v13;
							Set v28 = Collections.unmodifiableSet(this.mAllowedCrossTaskNavigations);
							Set v27 = v28;
							Set v30 = Collections.unmodifiableSet(this.mBlockedCrossTaskNavigations);
							Set v29 = v30;
							Set v32 = Collections.unmodifiableSet(this.mAllowedActivities);
							Set v31 = v32;
							Set v34 = Collections.unmodifiableSet(this.mBlockedActivities);
							Set v33 = v34;
							int v35 = this.mDefaultActivityPolicy;
							VirtualDeviceImpl$1 v37 = new VirtualDeviceImpl$1(VirtualDeviceImpl);
							VirtualDeviceManager$ActivityListener v36 = v37;
							VirtualDeviceImpl$$ExternalSyntheticLambda2 v39 = new VirtualDeviceImpl$$ExternalSyntheticLambda2(VirtualDeviceImpl);
							VirtualDeviceImpl$$ExternalSyntheticLambda3 v41 = new VirtualDeviceImpl$$ExternalSyntheticLambda3(VirtualDeviceImpl);
							String v43 = this.mDeviceProfile;
							boolean v46 = this.mRunningAppsChangedListener.add(VirtualDeviceImpl);
							GenericWindowPolicyController v10 = v11;
							Binder.restoreCallingIdentity(v9);
							Object v48 = VirtualDeviceManagerService.access$000(this.this$0, DisplayManagerInterna.class);
							int v49 = v48.createVirtualDisplay(p1, p2, p3, v10, p4);
							long v50 = Binder.clearCallingIdentity();
							if (v49 != -1) {
								Integer v52 = Integer.valueOf(v49);
								boolean v53 = this.mVirtualDisplayIds.contains(v52);
								if (v53 != 0) {
									Integer v54 = Integer.valueOf(v49);
									boolean v55 = this.mVirtualDisplayIds.add(v54);
									this.mDisplayId = v49;
									this.mWindowPolicyControllers.put(v49, v10);
									this.mInputManagerInternal.setPointerIconVisible(this.mDefaultShowPointerIcon, v49);
									this.mInputManagerInternal.setPointerAcceleration(1065353216, v49);
									this.mInputManagerInternal.setDisplayEligibilityForPointerCapture(v49, 0);
									DisplayInfo v65 = this.mDisplayManagerInternal.getDisplayInfo(v49);
									if ((DisplayInfo.flags & 128) != 128) {
										this.mWindowManager.setDisplayImePolicy(v49, 0);
										Integer v67 = Integer.valueOf(v49);
										boolean v68 = this.mPerDisplayWakelocks.containsKey(v67);
										if (v68 == 0) {
											Object v69 = this.mContext.getSystemService(PowerManage.class);
											StringBuilder v70 = new StringBuilder();
											StringBuilder v72 = v70.append(""VirtualDeviceImpl:"");
											StringBuilder v73 = v70.append(v49);
											String v74 = v70.toString();
											PowerManager$WakeLock v75 = v69.newWakeLock(10, v74, v49);
											Integer v76 = Integer.valueOf(v49);
											Object v77 = this.mPerDisplayWakelocks.put(v76, v75);
											v75.acquire();
											Binder.restoreCallingIdentity(v50);
											VirtualDeviceManagerInternal v80 = VirtualDeviceManagerService.-$$Nest$fgetmLocalService(this.this$0);
											v80.onVirtualDisplayCreated(v49);
											return v49;
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
","NONE"

