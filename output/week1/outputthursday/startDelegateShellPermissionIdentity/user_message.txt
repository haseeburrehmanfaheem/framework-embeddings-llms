// API: startDelegateShellPermissionIdentity
// Service: ActivityManagerService_3

public void startDelegateShellPermissionIdentity() {
    int var5 = UserHandle.getCallingAppId();
    int var8 = UserHandle.getCallingAppId();
    ActivityManagerService.boostPriorityForLockedSection();
    ThreadPriorityBooster var1 = sThreadPriorityBooster;
    this.boost();
    ThreadLocal var2 = this.mThreadState;
    Object var4 = var2.get();
    ThreadPriorityBooster$PriorityState var5 = (ThreadPriorityBooster$PriorityState) var4;
    int var6 = var5.regionCounter;
    int var8 = var5.tid;
    int var10 = Process.getThreadPriority(var8);
    int var11 = this.mBoostToPriority;
    int var12 = var5.tid;
    int var13 = this.mBoostToPriority;
    Process.setThreadPriority(var12,var13);
    var5.prevPriority = var10;<PATH_SEP>int var5 = UserHandle.getCallingAppId();
    int var8 = UserHandle.getCallingAppId();
    ActivityManagerService.boostPriorityForLockedSection();
    AppOpsService var17 = this.mAppOpsService;
    AppOpsManagerInternal$CheckOpsDelegate var19 = var17.getAppOpsServiceDelegate();
    PackageManagerInternal var21 = getPackageManagerInternalLocked();
    PackageManagerInternal$CheckPermissionDelegate var23 = var21.getCheckPermissionDelegate();
    AppOpsService var27 = this.mAppOpsService;
    AppOpsManagerInternal$CheckOpsDelegate var29 = var27.getAppOpsServiceDelegate();
    AppOpsService var59 = this.mAppOpsService;
    AppOpsManagerInternal$CheckOpsDelegate var61 = var59.getAppOpsServiceDelegate();
    62 = instanceof 61 <Application,Lcom/android/server/am/ActivityManagerService$ShellDelegate>;
    AppOpsService var65 = this.mAppOpsService;
    AppOpsManagerInternal$CheckOpsDelegate var67 = var65.getAppOpsServiceDelegate();
    ActivityManagerService$ShellDelegate var68 = (ActivityManagerService$ShellDelegate) var67;
    int var70 = var68.getDelegateUid();
    var68.setPermissions(param3);
    ActivityManagerService.resetPriorityAfterLockedSection();<PATH_SEP>int var5 = UserHandle.getCallingAppId();
    int var8 = UserHandle.getCallingAppId();
    ActivityManagerService.boostPriorityForLockedSection();
    AppOpsService var17 = this.mAppOpsService;
    AppOpsManagerInternal$CheckOpsDelegate var19 = var17.getAppOpsServiceDelegate();
    PackageManagerInternal var21 = getPackageManagerInternalLocked();
    PackageManagerInternal$CheckPermissionDelegate var23 = var21.getCheckPermissionDelegate();
    AppOpsService var27 = this.mAppOpsService;
    AppOpsManagerInternal$CheckOpsDelegate var29 = var27.getAppOpsServiceDelegate();
    AppOpsService var59 = this.mAppOpsService;
    AppOpsManagerInternal$CheckOpsDelegate var61 = var59.getAppOpsServiceDelegate();
    62 = instanceof 61 <Application,Lcom/android/server/am/ActivityManagerService$ShellDelegate>;
    AppOpsService var65 = this.mAppOpsService;
    AppOpsManagerInternal$CheckOpsDelegate var67 = var65.getAppOpsServiceDelegate();
    ActivityManagerService$ShellDelegate var68 = (ActivityManagerService$ShellDelegate) var67;
    int var70 = var68.getDelegateUid();
    var68.setPermissions(param3);
    ActivityManagerService.resetPriorityAfterLockedSection();
    ThreadPriorityBooster var1 = sThreadPriorityBooster;
    this.reset();
    ThreadLocal var2 = this.mThreadState;
    Object var4 = var2.get();
    ThreadPriorityBooster$PriorityState var5 = (ThreadPriorityBooster$PriorityState) var4;
    int var6 = var5.regionCounter;
    var8 = var6 add -1;
    var5.regionCounter = var8;
    int var9 = var5.regionCounter;
    int var11 = var5.prevPriority;
    int var13 = var5.tid;
    int var14 = var5.prevPriority;
    Process.setThreadPriority(var13,var14);<PATH_SEP>int var5 = UserHandle.getCallingAppId();
    int var8 = UserHandle.getCallingAppId();
    ActivityManagerService.boostPriorityForLockedSection();
    AppOpsService var17 = this.mAppOpsService;
    AppOpsManagerInternal$CheckOpsDelegate var19 = var17.getAppOpsServiceDelegate();
    PackageManagerInternal var21 = getPackageManagerInternalLocked();
    PackageManagerInternal$CheckPermissionDelegate var23 = var21.getCheckPermissionDelegate();
    AppOpsService var27 = this.mAppOpsService;
    AppOpsManagerInternal$CheckOpsDelegate var29 = var27.getAppOpsServiceDelegate();
    ArrayList var30 = this.mActiveInstrumentation;
    int var32 = var30.size();
    ArrayList var33 = this.mActiveInstrumentation;
    Object var35 = var33.get(var41);
    ActiveInstrumentation var36 = (ActiveInstrumentation) var35;
    ApplicationInfo var37 = var36.mTargetInfo;
    int var38 = var37.uid;
    IUiAutomationConnection var45 = var36.mUiAutomationConnection;
    ActivityManagerService$ShellDelegate var49 = new ActivityManagerService$ShellDelegate();
    ApplicationInfo var50 = var36.mTargetInfo;
    String var51 = var50.packageName;
    AppOpsService var53 = this.mAppOpsService;
    var53.setAppOpsServiceDelegate(var49);
    this.mCheckOpsDelegate = param2;
}